<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Precision Radar</title>

<style>
body {
  margin: 0;
  background: #030703;
  color: #7CFF9A;
  font-family: monospace;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  overflow: hidden;
}

/* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
#binaryBg{
  position: fixed;
  inset: 0;
  z-index: -1;
}

/* ===== Ø§Ù„Ø±Ø§Ø¯Ø§Ø± ===== */
.radar {
  width: 320px;
  height: 320px;
  border-radius: 50%;
  position: relative;
  background:
    radial-gradient(circle at center, rgba(124,255,154,0.18), transparent 60%),
    repeating-radial-gradient(circle at center, transparent 0, transparent 38px, rgba(124,255,154,0.25) 39px);
  border: 2px solid #7CFF9A;
  box-shadow: 0 0 40px rgba(124,255,154,.35);
  overflow: hidden;
}

.radar::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    linear-gradient(#1aff5a22 1px, transparent 1px),
    linear-gradient(90deg, #1aff5a22 1px, transparent 1px);
  background-size: 40px 40px;
}

.sweep {
  position: absolute;
  width: 50%;
  height: 100%;
  background: linear-gradient(to right, rgba(124,255,154,.55), transparent 75%);
  left: 50%;
  top: 0;
  transform-origin: left center;
  animation: sweep 4s linear infinite;
}

@keyframes sweep {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.target {
  width: 10px;
  height: 10px;
  background: red;
  border-radius: 50%;
  position: absolute;
  box-shadow: 0 0 14px red;
  display: none;
}

.panel {
  margin-top: 8px;
  border: 1px solid #7CFF9A;
  padding: 8px 12px;
  width: 320px;
  text-align: center;
}
button {
  margin-top: 6px;
  background: transparent;
  color: #7CFF9A;
  border: 1px solid #7CFF9A;
  padding: 4px 10px;
}
</style>
</head>

<body>

<!-- Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© -->
<canvas id="binaryBg"></canvas>

<div class="radar" id="radar">
  <div class="sweep"></div>
  <div class="target" id="target"></div>
</div>

<div class="panel" id="liveCoords">
  Waiting for locationâ€¦
</div>

<div class="panel">
  <div id="lastCoords">Ø¢Ø®Ø± Ù…ÙˆÙ‚Ø¹: â€”</div>
  <button onclick="copyLast()">Ù†Ø³Ø® Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª</button>
</div>

<!-- ğŸ”Š ØµÙˆØª Ø±Ø§Ø¯Ø§Ø± -->
<audio id="radarSound">
  <source src="data:audio/wav;base64,UklGRlAAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YUwAAAAA////////////////////////">
</audio>

<script>
/* ===== Ø®Ù„ÙÙŠØ© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ===== */
const bg = document.getElementById("binaryBg");
const ctx = bg.getContext("2d");

function resizeBg(){
  bg.width = innerWidth;
  bg.height = innerHeight;
}
resizeBg();
addEventListener("resize", resizeBg);

const chars = "10010100111000";
const size = 14;
const cols = Math.floor(bg.width / size);
const drops = Array(cols).fill(1);

setInterval(()=>{
  ctx.fillStyle = "rgba(0,0,0,0.08)";
  ctx.fillRect(0,0,bg.width,bg.height);

  ctx.fillStyle = "rgba(124,255,154,0.25)";
  ctx.font = size + "px monospace";

  for(let i=0;i<drops.length;i++){
    const t = chars[Math.floor(Math.random()*chars.length)];
    ctx.fillText(t, i*size, drops[i]*size);
    if(drops[i]*size > bg.height && Math.random() > 0.98) drops[i]=0;
    drops[i]++;
  }
},55);

/* ===== Ø§Ù„Ø±Ø§Ø¯Ø§Ø± + Ø§Ù„Ù…ÙˆÙ‚Ø¹ ===== */
const radar = document.getElementById("radar");
const target = document.getElementById("target");
const liveBox = document.getElementById("liveCoords");
const lastBox = document.getElementById("lastCoords");
const radarSound = document.getElementById("radarSound");

let lastLat = null;
let lastLon = null;
let savedCoords = "";

radarSound.volume = 0.55;
setInterval(() => {
  radarSound.currentTime = 0;
  radarSound.play();
}, 4000);

function moveTarget(lat, lon) {
  const r = radar.clientWidth / 2;
  const dx = (lon - lastLon) * 50000;
  const dy = (lat - lastLat) * -50000;

  let x = r + dx;
  let y = r + dy;

  x = Math.max(10, Math.min(310, x));
  y = Math.max(10, Math.min(310, y));

  target.style.left = `${x}px`;
  target.style.top = `${y}px`;
  target.style.display = "block";
}

function copyLast() {
  if (savedCoords) {
    navigator.clipboard.writeText(savedCoords);
    alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª");
  }
}

if (navigator.geolocation) {
  navigator.geolocation.watchPosition(
    pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      const acc = pos.coords.accuracy.toFixed(1);

      liveBox.innerHTML = `
        Latitude: ${lat.toFixed(6)}<br>
        Longitude: ${lon.toFixed(6)}<br>
        Accuracy: Â±${acc} m
      `;

      if (lastLat !== null && (lat !== lastLat || lon !== lastLon)) {
        moveTarget(lat, lon);
        savedCoords = `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
        lastBox.innerText = `Ø¢Ø®Ø± Ù…ÙˆÙ‚Ø¹: ${savedCoords}`;
      }

      lastLat = lat;
      lastLon = lon;
    },
    () => {
      liveBox.innerText = "Location permission denied";
    },
    {
      enableHighAccuracy: true,
      maximumAge: 0,
      timeout: 10000
    }
  );
}
</script>

</body>
</html>
